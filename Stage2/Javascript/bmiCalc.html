<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Calculator</title>
    <style>
        *{
            line-height: 1.3rem;
            font-size: 1.2rem;
        }
        input, label{
            margin-bottom: 1rem;
            margin-top: 1rem;
            vertical-align: middle;
            width: 100%;
        }
        input{
            min-width: 6rem;
        }
        form{
            text-align: left;
            display: flex;
            justify-content: center;
        }
        button, p{
            display: block;
            margin: 0 auto;
            padding: 0.5rem;
        }
        .radio-td{
            display: flex;
            flex-direction: row;
        }

        </style>
</head>
<body>
    <form onsubmit="return calculateBMI()">
        <table>
            <tr>
                <td><label for="name">Enter Your name: </label></td>
                <td><input type="text" id="name" placeholder="Enter your name"><br></td>
            </tr>
            <tr>
                <td><label for="weight">Enter Your weight (kg): </label></td>
                <td><input type="number" id="weight" placeholder="kg"><br></td>
            </tr>
            <tr>
                <td><label for="height">Enter your height (cm): </label></td>
                <td><input type="number" id="height" placeholder="cm"></td>
            </tr>
            <tr>
                <td colspan="2"><button type="submit">Find out your BMI!</button></td>
            </tr>
            <tr><td colspan="2"><p id="bmi"></p></td></tr>
            <tr><td colspan="2"><p id="errorMessage"></p></td></tr>
    </table>
</form>
    <script>
        //function to change an element's inner HTML
        function passMessageToElement (elementID, message){
            document.getElementById(elementID).innerHTML = message;
            return null
        }
        //function to get the value of an elemeny by ID
        function getValueOfElement(ElementID){
            elementValue = document.getElementById(ElementID).value
            return elementValue;
        }

        function calculateBMI(){
        //reset text paragraphs after every button click. (elementID, message to pass)
        passMessageToElement("errorMessage", "");
        passMessageToElement("bmi", "");
        var classification;
        //trimming the name to get rid of spaces at the start and at the end.
        var name = getValueOfElement("name").trim();
        var weight = getValueOfElement("weight")*1;
        var height = getValueOfElement("height")/100;
        // this 'awesome' varaible will calculate bmi and round it to 1 number after the decimal point. using the method 'round' after multiplying by 10
        //then dividing by 10 to get our number back with 1 decimal point (the round will round the number to the nearest integer) Ex. round(0.55 * 10)
        // = 5, then we divide by 10, we get 0.5
        var bmi = Math.round((weight / Math.pow(height,2))*10)/10;
        //check if variable name isn't null or empty
        if(name){
             // Regular expression to match any alphabetical letter, capital or small, then (space or ' or -) and so on...until it ends with a @
            var regex = /^[a-zA-Z]+(?:[' -][a-zA-Z]+)*$/;
            if(!regex.test(name) || name.length < 2 || name.length > 100){
                passMessageToElement("errorMessage",  "Please input a valid name!<br>Your name cannot contain numbers or symbols<br>or be less than 2 characters or more than 100.");
            }
            //check if weight variable isn't null or empty
            else if(!weight){
                passMessageToElement("errorMessage",  "Weight field is required!<br>Cannot be 0");
            }
            else{
                 //check how much the person's weight is, reject input if higher than 635 or lower than 1
                if (weight > 635 || weight < 1){
                    passMessageToElement("errorMessage",  "Please input a valid weight!<br>between 1kg and 635kg."); 
                }
                else if(!height){
                    passMessageToElement("errorMessage",  "Height field is required!<br>Cannot be 0");
                }
                else{
                     //check if person is bigger than 2.7meters or shorter than 0.5meters
                    if (height > 2.7 || height < 0.55){
                        passMessageToElement("errorMessage",  "Please input a valid height!<br>between 55cm and 220cm.");
                    }
                    //after passing all the checks, do the bmi calculations and display ouput to the user.
                    else{
                        if(bmi < 18.5){
                            classification = "underweight";
                        }
                        else if(bmi < 25){
                            classification = "normal";
                        }
                        else if(bmi < 30){
                            classification = "overweight";
                        }
                        else{
                            classification = "obese";
                        }
                        passMessageToElement("bmi", "Dear "+name+", Your BMI is: <b>"+ bmi + "kg/m<sup>2</sup></b> " + "<br/>Your BMI shows that you're <b>" + classification + "</b>");
                    }
                }
            }
        }
        else{
            passMessageToElement("errorMessage",  "Name field is required!");
        }
        return false;
        }
    </script>
</body>
</html>